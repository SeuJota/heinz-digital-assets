<%= form_for [@category, @image] , :html => { :multipart => true, role: "form", :class => "form-horizontal text-center" } do |f| %>  
	<% if @image.errors.full_messages.any? %>
		<% @image.errors.full_messages.each do |error_message| %>
		<%= error_message if @image.errors.full_messages.first == error_message %> <br />
	<% end %>
	<% end %>
	<div class="form-group text-center">
		<%= f.label :name, :class => "col-sm-4 control-label" %>
		<div class="col-sm-4">
			<%= f.text_field :name, :class => "form-control" %>
		</div>
	</div>
	<div class="form-group text-center">
		<%= f.label :parent, :class => "col-sm-4 control-label" %>
		<div class="col-sm-4">
			<%= f.collection_select(:category_id, Category.leafs,:id, :name, {prompt: "Select a category", selected: @category.id}, {class: "form-control"}) %>
		</div>	
	</div>
	<div class="form-group text-center">
		<%= f.label :image, :class => "col-sm-4 control-label" %>
		<div class="col-sm-4">
			<%= f.file_field :avatar, :class => "form-control" %>
		</div>
	</div>
	<div class="form-group text-center">
		<%= f.submit 'Submit', :class => "btn btn-success" %>
		<% unless @category.nil? %>
			<%= link_to 'Back', nested_category_path(Category.find(@category)),:class => "btn btn-warning" %>
		<% end %>
	</div>
<% end %> 