.jumbotron
	.container
		%h1 
			Users
			%small Admin Panel

		= link_to "All Users", :action => "users_admin"
		|
		= link_to "Users awaiting approval", :action => "users_admin", :approved => "false"
		|
		= link_to "Admins", :action => "users_admin", :admin => "true"
.container
	%table{class: "table table-striped table-condensed"}
		%thread
			%tr
				%th.text-center #
				%th.text-center Name
				%th.text-center Email
				%th.text-center Approved?
				%th.text-center Admin?	
				%th.text-center Actions 
		- @users.each do |user|
			%tr
				%td.text-center= user.id
				%td.text-center= user.name
				%td.text-center= user.email
				%td.text-center
					- if user.approved && user != current_user
						= link_to "Disapprove" , disapproved_path(id: user.id), method: :put, :class => "btn btn-warning btn-sm"
					- elsif !user.approved && user != current_user
						= link_to "Approve" , approved_path(id: user.id), method: :put, :class => "btn btn-success btn-sm"
					- else
						= link_to "Disapprove" , disapproved_path(id: user.id), method: :put, :class => "btn btn-warning btn-sm", disabled: "disabled"
				%td.text-center
					- if user.admin && user != current_user
						=link_to "Remove" , unset_admin_path(id: user.id), method: :put, data: { confirm: 'Are you sure?' }, :class => "btn btn-danger btn-sm"
					- elsif !user.admin && user != current_user
						=link_to "Set Admin" , set_admin_path(id: user.id), method: :put, data: { confirm: 'Are you sure?' }, :class => "btn btn-success btn-sm"
					- else
						=link_to "Remove" , unset_admin_path(id: user.id), :class => "btn btn-danger btn-sm", disabled: "disabled"

				%td.text-center
					= link_to "Edit", edit_user_path(id: user.id), :class => "btn btn-info btn-sm edit", remote: true
					= link_to "Destroy", user_path(id: user.id), method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-danger btn-sm"
			%tr{class: "edit_form#{user.id}", style: "display: none;"}
				%td.text-center{colspan: 6} a
